<!DOCTYPE html>
<html>
  <head>
    <title>Websocket example</title>
    <script>
      var echoUrl = "ws://" + window.location.host + "/echo";
      var echoSocket;
      function establishConnection() {
        echoSocket = new WebSocket(echoUrl);
        echoSocket.onopen = function(evt) {
          exButton.disabled = false;
        }
        echoSocket.onmessage = function(evt) {
           log.innerHTML += "<p>" + evt.data + "</p>";
        }
      }
      window.onload = function() {
        exButton.onclick = function() {
          echoSocket.send(input.value);
        }
        establishConnection();
      }
    </script>
  </head>
  <body>
    <h1>Websocket example</h1>
    <input type="text" id="input" value="aaa"></input><button disabled="true" type="button" id="exButton">Exchange</button>
    <span id="log"></span>
  </body>
</html>
